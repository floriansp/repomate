Origin: <%= @config.get[:origin] %>
Label: <%= @config.get[:label] %>
Suite: stable
Codename: <%= source.name %>
Date: <%= now %>
Architectures: <%= Architecture.names.join(', ') %>
Components: <%= Component.names.join(', ') %>
Description: Repository for debian <%=  %>
MD5Sum:
<% Architecture.dataset(source_category).each do |entry| %>
  <% source = Architecture.new(entry[:architecture], entry[:component], entry[:suitename], source_category) %>
  <% Dir.glob(File.join(entry[:fullpath], "Packages*")).each do |file| %>
    <% path = File.join(entry[:component], entry[:architecture], File.basename(file)) %>
    <%= Digest::MD5.file(file) %> <%= File.size(file) %> <%= path %>
  <% end %>
  <% file = File.join(entry[:fullpath], "Release") %>
  <% path = File.join(entry[:component], entry[:architecture], File.basename(file)) %>
  <%= Digest::MD5.file(file) %> <%= File.size(file) %> <%= path %>
<% end %>
SHA1:
<% Architecture.dataset(source_category).each do |entry| %>
  <% source = Architecture.new(entry[:architecture], entry[:component], entry[:suitename], source_category) %>
  <% Dir.glob(File.join(entry[:fullpath], "Packages*")).each do |file| %>
    <% path = File.join(entry[:component], entry[:architecture], File.basename(file)) %>
    <%= Digest::SHA1.file(file) %> <%= File.size(file) %> <%= path %>
  <% end %>
  <% file = File.join(entry[:fullpath], "Release") %>
  <% path = File.join(entry[:component], entry[:architecture], File.basename(file)) %>
  <%= Digest::SHA1.file(file) %> <%= File.size(file) %> <%= path %>
<% end %>
SHA256:
<% Architecture.dataset(source_category).each do |entry| %>
  <% source = Architecture.new(entry[:architecture], entry[:component], entry[:suitename], source_category) %>
  <% Dir.glob(File.join(entry[:fullpath], "Packages*")).each do |file| %>
    <% path = File.join(entry[:component], entry[:architecture], File.basename(file)) %>
    <%= Digest::SHA256.new(256).file(file) %> <%= File.size(file) %> <%= path %>
  <% end %>
  <% file = File.join(entry[:fullpath], "Release") %>
  <% path = File.join(entry[:component], entry[:architecture], File.basename(file)) %>
  <%= Digest::SHA256.new(256).file(file) %> <%= File.size(file) %> <%= path %>
<% end %>
